#!/bin/bash
# a GUI manpage viewer for kde, in 15 lines (1(1)=pi 3-15(13)=code 2(1)=comment)=(15)
if [ -z "$1" ]; then 
	if (kdialog --caption "What manual page do you want?" --inputbox "Enter your response, the command line will be passed to man untouched." "" 640 480 > /tmp/kman.rep); then
		set -- $(cat /tmp/kman.rep)
	else
		set -- kman_abort
	fi
fi
if [ "$1" != "kman_abort" ]; then
	ERRSZ='320 200' TXTSZ='1280 1024'
	function showkman() { [ -s /tmp/kman.$1 ] &&	kdialog --textbox /tmp/kman.$1 $2; rm /tmp/kman.$1; }
	man $@ > /tmp/kman.tmp 2> /tmp/kman.err
	showkman err "$ERRSZ"; showkman tmp "$TXTSZ"
fi
