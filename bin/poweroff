#!/bin/bash
echo "shutting down in 2 seconds [ press CTRL-C to change your mind ]"
# yeah yeah, its actually 3.5 seconds, but always tell the user they have less time than actual, because
# it takes at least 1.5 seconds for them to read that they have 2 seconds left (hence 1.5+2=3.5, right?)
echo "2..."
sleep 1
echo "1..."
sleep 1
echo "0..."
sleep 1
echo "CONTACT"
sleep 0.5
if [ $UID -eq 0 ]; then
	shutdown -P now
else
	if (sudo shutdown -P now); then
		true
	else
		echo "Fatal, cant sudo it.. trying without..."
		shutdown -P now
		if [ $? -eq 0 ]; then
			echo "OK, powering off"
		else
			echo "Cannot shutdown from here, try another account."
		fi
	fi
fi
echo "script completed."
