#!/bin/bash
SVR_NUM=":$(ps avfx | grep xinit --count)"
RANDOMOUT=$RANDOM-xinit-stdout.log
RANDOMERR=$RANDOM-xinit-stderr.log
# allow a silent run
echo "this session was logged at $RANDOMOUT and $RANDOMERR (out/err respective)" > $1.xinit.log
xinit $* -- $SVR_NUM 1> /tmp/$RANDOMOUT-xinit-stdout 2> /tmp/$RANDOMERR-xinit-stderr
if [[ $? -ne 0 ]]; then
	echo -ne "There were errors, for details, "
	cat $1.xinit.log
	rm $1.xinit.log
else
	cat $1.xinit.log >> ~/.cache/xinit-unique.log
fi
