#!/bin/false gxbase
#
# envinfo
#
# bash environment-related information functions
#
if [[ -z $GXBASE_LOADING ]] && [[ $GXBASE_LOADING != TRUE ]]; then
	echo "To be loaded by GXBASE only, not as a general use script."
	return 1
else
	# scripts loaded by gxbase only output their name, all other output is redirected 
	# to the log specified by GXBASE_LOG
	echo -ne "$BASH_SOURCE"
	# required components (GXBASE_LOG and gxbase-core)
	gx.assert LOG
	gx.loadassert core
fi

function gx.allvarnames()
{
	# preserve the error value (some scripts will need that)
	PREV_ERR_VALUE=$?
	declare -p | grep "^\S*\s\S\S\s\S*" -o | grep -Po "(?<=declare -\S )[^=]*(?=\=)"
	return $PREV_ERR_VALUE
}


# all gxbase components need to have an unloader
# their name is the same as the component's name with .unloader affixed to it
function gx.gxbase-envinfo.unloader
{
	unset -f gx.allvarnames
}

# register component in the library
# all components will called "gxbase-[compname]"
# the filename will be [compname]
GXBASE_COMPONENTS[gxbase-envinfo]=1

